<app-navbar></app-navbar>

<!-- ğŸ  Header Section -->
<div class="top-bar">
  <h2 class="page-title">ğŸ“ Available Exams</h2>
  <button class="btn-dashboard" (click)="goToStudentDashboard()">
    ğŸ  Student Dashboard
  </button>
</div>

<!-- ğŸ“‹ Exam Container -->
<div class="exam-container">
  <div *ngIf="loading" class="loading">â³ Loading available exams...</div>

  <div *ngIf="errorMessage" class="error-message">{{ errorMessage }}</div>

  <div *ngIf="!loading && exams.length > 0" class="exam-list">
    <div
      *ngFor="let exam of exams"
      class="exam-card"
      [class.attempted]="isExamAttempted(exam.id)"
    >
      <h3>{{ exam.title }}</h3>
      <p class="description">
        {{ exam.description || 'No description available.' }}
      </p>

      <div class="exam-info">
        <span>ğŸ•’ Duration: {{ exam.durationMinutes }} min</span>
        <span>ğŸ“˜ Questions: {{ exam.questions?.length || 0 }}</span>
      </div>

      <!-- âœ… Conditional Buttons -->
      <button
        *ngIf="!isExamAttempted(exam.id)"
        class="btn-start"
        (click)="startExam(exam.id)"
      >
        â–¶ Start Exam
      </button>

      <button
        *ngIf="isExamAttempted(exam.id)"
        class="btn-view"
        (click)="viewPerformance(exam.id)"
      >
        ğŸ“Š View Performance
      </button>
    </div>
  </div>

  <div *ngIf="!loading && exams.length === 0 && !errorMessage" class="empty">
    No exams available at the moment.
  </div>
</div>
